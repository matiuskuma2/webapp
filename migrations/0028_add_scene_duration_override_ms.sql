-- ====================================================================
-- 0028: 無音シーンの尺設定（duration_override_ms）
-- ====================================================================
-- 
-- 目的:
--   - セリフなしシーン（戦闘・風景・間など）の尺を手動設定可能にする
--   - 「発話なし＝エラー」ではなく「無音シーン＝正常」として扱う
--
-- 尺の決定優先順位（SSOT）:
--   1. utterances音声合計 + padding（音声がある場合）
--   2. duration_override_ms（手動設定）
--   3. dialogue推定（300ms/文字）
--   4. DEFAULT（5000ms）
--
-- ====================================================================

-- scenes に無音尺の手動設定カラムを追加
ALTER TABLE scenes ADD COLUMN duration_override_ms INTEGER;

-- ====================================================================
-- 運用ルール
-- ====================================================================
-- 
-- duration_override_ms:
--   - NULL: 自動計算（音声長 or 推定 or デフォルト）
--   - 数値: 手動設定した尺（ミリ秒）
--   - 最小: 2000ms（2秒）
--   - 最大: 600000ms（10分）
--
-- UI表示:
--   - 「⏱ 5.0s（音声）」- 音声から決定
--   - 「⏱ 5.0s（手動）」- duration_override_ms から決定
--   - 「⏱ 5.0s（推定）」- セリフ文字数から推定
--   - 「⏱ 5.0s（自動）」- デフォルト値
--
-- ====================================================================
