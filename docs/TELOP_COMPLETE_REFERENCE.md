# ãƒ†ãƒ­ãƒƒãƒ—æ”¹å–„ å®Œå…¨ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

**Version**: 2.0 (Final)  
**Created**: 2026-02-02  
**Status**: å…¨PRå®Œäº†

---

## æ¦‚è¦: 2ç³»çµ±ã®ãƒ†ãƒ­ãƒƒãƒ—

ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã§ã¯**2ç¨®é¡ã®ãƒ†ãƒ­ãƒƒãƒ—**ãŒå­˜åœ¨ã—ã€ãã‚Œãã‚Œç‹¬ç«‹ã—ã¦å‹•ä½œã—ã¾ã™ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ãƒ†ãƒ­ãƒƒãƒ—ã®2ç³»çµ±                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Remotion ãƒ†ãƒ­ãƒƒãƒ—          â”‚  â”‚   æ¼«ç”»ç„¼ãè¾¼ã¿ãƒ†ãƒ­ãƒƒãƒ—       â”‚  â”‚
â”‚  â”‚   (å‹•çš„æç”»)                 â”‚  â”‚   (é™çš„ç„¼ãè¾¼ã¿)            â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ ãƒ»å‹•ç”»ç”Ÿæˆæ™‚ã«æç”»           â”‚  â”‚ ãƒ»ç”»åƒ(PNG)ã«ç„¼ãè¾¼ã¿       â”‚  â”‚
â”‚  â”‚ ãƒ»æ¬¡å›ãƒ“ãƒ«ãƒ‰ã§å³åæ˜          â”‚  â”‚ ãƒ»å…¬é–‹æ™‚ã«åæ˜               â”‚  â”‚
â”‚  â”‚ ãƒ»å¾Œã‹ã‚‰è‡ªç”±ã«å¤‰æ›´å¯èƒ½       â”‚  â”‚ ãƒ»å†ç„¼ãè¾¼ã¿ãŒå¿…è¦          â”‚  â”‚
â”‚  â”‚ ãƒ»Vrewç´šã®èª¿æ•´ãŒå¯èƒ½         â”‚  â”‚ ãƒ»ãƒ™ãƒ¼ã‚¹ç”»åƒã¯å›ºå®š          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 1. Remotion ãƒ†ãƒ­ãƒƒãƒ—ï¼ˆå‹•ç”»ç”Ÿæˆæ™‚ã«å‹•çš„æç”»ï¼‰

### 1.1 è¨­å®šå¯èƒ½ãªé …ç›®

| ã‚«ãƒ†ã‚´ãƒª | è¨­å®šé …ç›® | å€¤ã®ç¯„å›² | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ |
|---------|---------|---------|-----------|
| **ãƒ—ãƒªã‚»ãƒƒãƒˆ** | style_preset | minimal / outline / band / pop / cinematic | outline |
| **ã‚µã‚¤ã‚º** | size_preset | sm / md / lg | md |
| **ä½ç½®** | position_preset | bottom / center / top | bottom |
| **ã‚«ã‚¹ã‚¿ãƒ ** | text_color | HEXè‰² | #FFFFFF |
| **ã‚«ã‚¹ã‚¿ãƒ ** | stroke_color | HEXè‰² | #000000 |
| **ã‚«ã‚¹ã‚¿ãƒ ** | stroke_width | 0-6 px | 2 |
| **ã‚«ã‚¹ã‚¿ãƒ ** | bg_color | HEXè‰² | #000000 |
| **ã‚«ã‚¹ã‚¿ãƒ ** | bg_opacity | 0-1 (0-100%) | 0 |
| **ã‚«ã‚¹ã‚¿ãƒ ** | font_family | noto-sans / noto-serif / rounded / zen-maru | noto-sans |
| **ã‚«ã‚¹ã‚¿ãƒ ** | font_weight | 400 / 500 / 600 / 700 / 800 | 600 |
| **Typography** | max_lines | 1-5 | ç„¡åˆ¶é™ |
| **Typography** | line_height | 100-200 (%) | 140 |
| **Typography** | letter_spacing | -2 to 6 (px) | 0 |

### 1.2 ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UI (Video Build) â”‚
â”‚ ãƒ»vbTelopStyle   â”‚
â”‚ ãƒ»vbTelopSize    â”‚
â”‚ ãƒ»custom_style   â”‚
â”‚ ãƒ»typography     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ buildSettings   â”‚
â”‚ .telops         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ video-build-    â”‚
â”‚ helpers.ts      â”‚
â”‚ buildProjectJsonâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ projectJson     â”‚
â”‚ .build_settings â”‚
â”‚ .telops         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Remotion                            â”‚
â”‚ RilarcVideo.tsx â†’ Scene.tsx         â”‚
â”‚ â†’ Subtitle.tsx (å®Ÿéš›ã®æç”»)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 SSOTéšå±¤ï¼ˆå„ªå…ˆé †ä½ï¼‰

```
1. Project defaults (telops_remotion) â† æ°¸ç¶šåŒ–ã•ã‚ŒãŸæ—¢å®šå€¤
       â†“ ä¸Šæ›¸ãå¯èƒ½
2. Build override (buildSettings.telops) â† ä»Šå›ã®ãƒ“ãƒ«ãƒ‰ã ã‘
       â†“ ä¸Šæ›¸ãå¯èƒ½
3. Scene override (scene_overrides) â† ã‚·ãƒ¼ãƒ³å˜ä½ã®ON/OFF
```

### 1.4 æ°¸ç¶šåŒ– (PR-Remotion-Telop-DefaultSave)

**ä¿å­˜å…ˆ**: `projects.settings_json.telops_remotion`

```typescript
interface TelopsRemotion {
  enabled: boolean;
  style_preset: string;
  size_preset: string;
  position_preset: string;
  custom_style?: CustomStyle | null;
  typography?: Typography | null;
  updated_at: string; // ISOæ—¥æ™‚
}
```

**API**: `PUT /api/projects/:id/telop-settings`

**UI**: ã€Œã“ã®è¨­å®šã‚’ä»Šå¾Œã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¨ã—ã¦ä¿å­˜ã€ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆONï¼‰

---

## 2. æ¼«ç”»ç„¼ãè¾¼ã¿ãƒ†ãƒ­ãƒƒãƒ—ï¼ˆç”»åƒã«å›ºå®šã•ã‚Œã‚‹ï¼‰

### 2.1 è¨­å®šå¯èƒ½ãªé …ç›®

| è¨­å®šé …ç›® | å€¤ã®ç¯„å›² | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ |
|---------|---------|-----------|
| style_preset | minimal / outline / band / pop / cinematic | outline |
| size_preset | sm / md / lg | md |
| position_preset | bottom / center / top | bottom |

### 2.2 ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UI (æ¼«ç”»è¨­å®š)    â”‚
â”‚ ãƒ»vbComicTelop  â”‚
â”‚   Style/Size/Posâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PUT /api/       â”‚
â”‚ projects/:id/   â”‚
â”‚ comic-telop-    â”‚
â”‚ settings        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ projects        â”‚
â”‚ .settings_json  â”‚
â”‚ .telops_comic   â”‚  â† SSOT (ä¿å­˜ã®ã¿)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ POST /api/      â”‚
â”‚ projects/:id/   â”‚
â”‚ comic/rebake    â”‚  â† ä¸€æ‹¬åæ˜ äºˆç´„
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ scenes          â”‚
â”‚ .comic_data     â”‚
â”‚ .pending_       â”‚  â† äºˆç´„çŠ¶æ…‹
â”‚  regeneration   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ POST /api/      â”‚
â”‚ scenes/:id/     â”‚
â”‚ comic/publish   â”‚  â† å…¬é–‹ï¼ˆç„¼ãè¾¼ã¿å®Ÿè¡Œï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ–°ã—ã„comicç”»åƒ  â”‚
â”‚ (PNG with text) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹é€ ï¼ˆé‡è¦ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç„¼ãè¾¼ã¿ãƒ¬ã‚¤ãƒ¤ãƒ¼        â”‚  â† ã€Œå†ç„¼ãè¾¼ã¿ã€å¯¾è±¡
â”‚  (å¹ãå‡ºã—/ãƒ†ãƒ­ãƒƒãƒ—)     â”‚     telops_comic è¨­å®šã§å¤‰ã‚ã‚‹
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ãƒ™ãƒ¼ã‚¹ç”»åƒ              â”‚  â† âŒ è§¦ã‚‰ãªã„
â”‚  (ã‚­ãƒ£ãƒ©/èƒŒæ™¯)           â”‚     AIç”»åƒã®å†ç”Ÿæˆã¯åˆ¥ãƒ•ãƒ­ãƒ¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.4 rebake ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ (PR-Comic-Rebake-DiffBadge)

| ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | æ„å‘³ | ãƒãƒƒã‚¸ |
|-----------|------|--------|
| pending | åæ˜ äºˆç´„ä¸­ï¼ˆå…¬é–‹ã§é©ç”¨ï¼‰ | ğŸŸ¡ |
| outdated | è¨­å®šãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹ï¼ˆæœªåæ˜ ï¼‰ | ğŸŸ  |
| current | æœ€æ–°è¨­å®šãŒé©ç”¨æ¸ˆã¿ | âœ… |
| no_publish | ã¾ã å…¬é–‹ã•ã‚Œã¦ã„ãªã„ | âšª |

**API**: `GET /api/projects/:id/comic/rebake-status`

---

## 3. ãƒãƒ£ãƒƒãƒˆä¿®æ­£ã¨ã®é€£æº

### 3.1 ãƒ†ãƒ­ãƒƒãƒ—é–¢é€£ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

| ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ | èª¬æ˜ | scope |
|-----------|------|-------|
| telop.set_enabled | å…¨ä½“ON/OFF | remotionå›ºå®š |
| telop.set_enabled_scene | ã‚·ãƒ¼ãƒ³å˜ä½ON/OFF | remotionå›ºå®š |
| telop.set_position | ä½ç½®å¤‰æ›´ | remotion/comic/both |
| telop.set_size | ã‚µã‚¤ã‚ºå¤‰æ›´ | remotion/comic/both |
| telop.set_style | ã‚¹ã‚¿ã‚¤ãƒ«å¤‰æ›´ | remotion/comic/both |
| telop.set_typography | æ–‡å­—çµ„ã¿å¤‰æ›´ | remotionå›ºå®š |

### 3.2 scope ã«ã‚ˆã‚‹å‹•ä½œã®é•ã„

```
scope = "remotion" (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ)
  â†“
  æ¬¡å›Video Buildã§å³æ™‚åæ˜ 
  ï¼ˆå†ç„¼ãè¾¼ã¿ä¸è¦ï¼‰

scope = "comic"
  â†“
  telops_comic ã«ä¿å­˜
  â†“
  è‡ªå‹•ã§å…¨ã‚·ãƒ¼ãƒ³ rebake äºˆç´„ (PR-Chat-Telop-Scope-AutoRebake)
  â†“
  å…¬é–‹æ™‚ã«ç„¼ãè¾¼ã¿åæ˜ 

scope = "both"
  â†“
  ä¸Šè¨˜ä¸¡æ–¹ã‚’å®Ÿè¡Œ
```

### 3.3 è‡ªå‹•rebake (PR-Chat-Telop-Scope-AutoRebake)

ãƒãƒ£ãƒƒãƒˆã§ `scope=comic` ã¾ãŸã¯ `scope=both` ã®ãƒ†ãƒ­ãƒƒãƒ—å¤‰æ›´ã‚’é©ç”¨ã™ã‚‹ã¨ï¼š

1. `telops_comic` ã‚’ä¿å­˜
2. è‡ªå‹•ã§ `POST /api/projects/:id/comic/rebake` ã‚’å®Ÿè¡Œ
3. ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³ä¸­ï¼ˆ60ç§’ï¼‰ãªã‚‰è­¦å‘Šã‚’è¿”ã™ï¼ˆã‚¨ãƒ©ãƒ¼ã«ã¯ã—ãªã„ï¼‰
4. ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã« `auto_rebake` æƒ…å ±ã‚’å«ã‚ã‚‹

```typescript
auto_rebake: {
  requested: boolean;
  affected_scenes?: number;
  affected_scene_ids?: number[];
  cooldown_remaining_sec?: number;
  message: string;
}
```

---

## 4. API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

### 4.1 Remotion ãƒ†ãƒ­ãƒƒãƒ—

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| PUT | `/api/projects/:id/telop-settings` | è¨­å®šã‚’æ°¸ç¶šåŒ– |
| GET | `/api/projects/:id` | `settings.telops_remotion` ã§å–å¾— |

### 4.2 æ¼«ç”»ãƒ†ãƒ­ãƒƒãƒ—

| ãƒ¡ã‚½ãƒƒãƒ‰ | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|---------|--------------|------|
| PUT | `/api/projects/:id/comic-telop-settings` | è¨­å®šã‚’ä¿å­˜ |
| POST | `/api/projects/:id/comic/rebake` | å…¨ã‚·ãƒ¼ãƒ³ä¸€æ‹¬äºˆç´„ |
| GET | `/api/projects/:id/comic/rebake-status` | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å–å¾— |
| POST | `/api/scenes/:id/comic/publish` | å…¬é–‹ï¼ˆç„¼ãè¾¼ã¿å®Ÿè¡Œï¼‰ |

---

## 5. UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

### 5.1 Video Build è¨­å®šï¼ˆRemotionï¼‰

**å ´æ‰€**: Builder ã‚¿ãƒ– â†’ Video Build è¨­å®šã‚«ãƒ¼ãƒ‰

| è¦ç´ ID | èª¬æ˜ |
|--------|------|
| vbTelopStylePreset | ã‚¹ã‚¿ã‚¤ãƒ«ãƒ—ãƒªã‚»ãƒƒãƒˆé¸æŠ |
| vbTelopSizePreset | ã‚µã‚¤ã‚ºé¸æŠ |
| vbTelopPositionPreset | ä½ç½®é¸æŠ |
| vbTelopTextColor | æ–‡å­—è‰² |
| vbTelopStrokeColor | ç¸å–ã‚Šè‰² |
| vbTelopStrokeWidth | ç¸å–ã‚Šå¤ªã• |
| vbTelopBgColor | èƒŒæ™¯è‰² |
| vbTelopBgOpacity | èƒŒæ™¯é€éåº¦ |
| vbTelopFontFamily | ãƒ•ã‚©ãƒ³ãƒˆ |
| vbTelopFontWeight | å¤ªã• |
| vbTelopMaxLines | æœ€å¤§è¡Œæ•° |
| vbTelopLineHeight | è¡Œé–“ |
| vbTelopLetterSpacing | æ–‡å­—é–“ |
| vbTelopSaveDefault | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆä¿å­˜ãƒã‚§ãƒƒã‚¯ |

### 5.2 æ¼«ç”»è¨­å®š

**å ´æ‰€**: Builder ã‚¿ãƒ– â†’ æ¼«ç”»ã®æ–‡å­—ï¼ˆç„¼ãè¾¼ã¿ï¼‰è¨­å®š

| è¦ç´ ID | èª¬æ˜ |
|--------|------|
| vbComicTelopStyle | ã‚¹ã‚¿ã‚¤ãƒ«é¸æŠ |
| vbComicTelopSize | ã‚µã‚¤ã‚ºé¸æŠ |
| vbComicTelopPosition | ä½ç½®é¸æŠ |
| btnBulkRebakeComic | ä¸€æ‹¬åæ˜ äºˆç´„ãƒœã‚¿ãƒ³ |

---

## 6. ç›£æŸ»ãƒ­ã‚°

| ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ | èª¬æ˜ | entity_type |
|-----------|------|-------------|
| telop.remotion.defaults_updated | Remotionè¨­å®šã‚’æ°¸ç¶šåŒ– | project |
| comic.rebake.requested | å˜ä¸€ã‚·ãƒ¼ãƒ³å†ç„¼ãè¾¼ã¿äºˆç´„ | scene |
| comic.rebake.project_requested | å…¨ã‚·ãƒ¼ãƒ³ä¸€æ‹¬äºˆç´„ | project |
| comic.rebake.completed | å†ç„¼ãè¾¼ã¿å®Œäº† | scene |

---

## 7. ãƒ•ã‚¡ã‚¤ãƒ«ä¾å­˜é–¢ä¿‚

### 7.1 Backend

```
src/routes/projects.ts
â”œâ”€â”€ PUT /api/projects/:id/telop-settings (Line ~1960)
â”œâ”€â”€ PUT /api/projects/:id/comic-telop-settings (Line ~1879)
â”œâ”€â”€ POST /api/projects/:id/comic/rebake (Line ~2152)
â””â”€â”€ GET /api/projects/:id/comic/rebake-status (Line ~2280)

src/routes/patches.ts
â”œâ”€â”€ telop.set_* ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®šç¾© (Line ~1610-1660)
â”œâ”€â”€ TelopSettingsOverride å‹å®šç¾© (Line ~1697)
â”œâ”€â”€ è‡ªå‹•rebakeå‡¦ç† (Line ~3229)
â””â”€â”€ auto_rebake ãƒ¬ã‚¹ãƒãƒ³ã‚¹ (Line ~3458)

src/utils/video-build-helpers.ts
â”œâ”€â”€ buildProjectJson (telops å«ã‚€) (Line ~1635)
â””â”€â”€ telops.typography ä¼æ’­ (Line ~1672)
```

### 7.2 Frontend

```
src/index.tsx
â”œâ”€â”€ Remotion ãƒ†ãƒ­ãƒƒãƒ—UI (Line ~1750-1940)
â””â”€â”€ æ¼«ç”»ãƒ†ãƒ­ãƒƒãƒ—UI (Line ~1933-2030)

public/static/project-editor.js
â”œâ”€â”€ getTelopCustomStyle() (Line ~13232)
â”œâ”€â”€ getTelopTypography() (Line ~13275)
â”œâ”€â”€ loadRemotionTelopSettings() (Line ~12470)
â”œâ”€â”€ saveRemotionTelopSettings() (Line ~12580)
â”œâ”€â”€ loadComicTelopSettings() (Line ~12410)
â”œâ”€â”€ saveComicTelopSettings() (Line ~12435)
â”œâ”€â”€ openBulkRebakeModal() (Line ~12560)
â”œâ”€â”€ executeBulkRebake() (Line ~12640)
â”œâ”€â”€ loadRebakeStatus() (Line ~3540)
â”œâ”€â”€ renderRebakeBadge() (Line ~3590)
â””â”€â”€ applyChatEdit() - auto_rebakeè¡¨ç¤º (Line ~11990)
```

### 7.3 Remotion

```
video-build-remotion/src/
â”œâ”€â”€ RilarcVideo.tsx
â”‚   â””â”€â”€ telopTypography å–å¾—ãƒ»ä¼æ’­ (Line ~52, 203)
â”œâ”€â”€ components/Scene.tsx
â”‚   â””â”€â”€ telopTypography ã‚’ Subtitle ã¸ (Line ~18, 248)
â””â”€â”€ components/Subtitle.tsx
    â”œâ”€â”€ Typography å‹å®šç¾© (Line ~25)
    â”œâ”€â”€ applyTypographyToBaseStyle() (Line ~105)
    â””â”€â”€ getCustomizedTextStyle() (Line ~145)
```

---

## 8. å®Ÿè£…å®Œäº† PR ä¸€è¦§

| PRå | å†…å®¹ | ã‚³ãƒŸãƒƒãƒˆ |
|------|------|---------|
| Phase 1 | Remotion 5ãƒ—ãƒªã‚»ãƒƒãƒˆ | - |
| Phase 2-1 | æ¼«ç”»telops_comicä¿å­˜ | - |
| Phase 2-2/2-3 | æ¼«ç”»å†ç„¼ãè¾¼ã¿ã‚¨ãƒ‡ã‚£ã‚¿ | - |
| Phase 3-A | ãƒãƒ£ãƒƒãƒˆ telop scope | - |
| PR-Comic-Rebake-All | å…¨ã‚·ãƒ¼ãƒ³ä¸€æ‹¬äºˆç´„ | 3e7918a |
| PR-Comic-Rebake-DiffBadge | å·®åˆ†ãƒãƒƒã‚¸ï¼ˆ4çŠ¶æ…‹ï¼‰ | 909a5cb |
| PR-Remotion-Subtitle-Typography | æ–‡å­—çµ„ã¿è¨­å®š | 9f585a6 |
| PR-Remotion-Telop-DefaultSave | æ°¸ç¶šåŒ– | e53c6c3 |
| PR-Chat-Telop-Scope-AutoRebake | è‡ªå‹•rebake | b0c45cb |

---

## 9. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### Q: Remotionãƒ†ãƒ­ãƒƒãƒ—ãŒåæ˜ ã•ã‚Œãªã„
**A**: æ¬¡å›Video Buildã§åæ˜ ã•ã‚Œã¾ã™ã€‚å³åº§ã«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹ã«ã¯ã€ãƒ“ãƒ«ãƒ‰ã‚’å†å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

### Q: æ¼«ç”»ã®æ–‡å­—ãŒå¤‰ã‚ã‚‰ãªã„
**A**: å†ç„¼ãè¾¼ã¿äºˆç´„ï¼ˆrebakeï¼‰â†’ å…¬é–‹ï¼ˆpublishï¼‰ã®é †ã§å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚Scene Splitã®ãƒãƒƒã‚¸ã§çŠ¶æ…‹ã‚’ç¢ºèªã§ãã¾ã™ã€‚

### Q: ã€Œã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³ä¸­ã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹
**A**: 60ç§’å¾…ã£ã¦ã‹ã‚‰å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚é€£ç¶šã—ãŸä¸€æ‹¬æ“ä½œã‚’é˜²ããŸã‚ã®åˆ¶é™ã§ã™ã€‚

### Q: ãƒ™ãƒ¼ã‚¹ç”»åƒï¼ˆã‚­ãƒ£ãƒ©/èƒŒæ™¯ï¼‰ã‚‚å¤‰ãˆãŸã„
**A**: ã€Œå†ç„¼ãè¾¼ã¿ã€ã§ã¯ãªãã€ŒAIç”»åƒã®å†ç”Ÿæˆã€ãŒå¿…è¦ã§ã™ã€‚åˆ¥ãƒ•ãƒ­ãƒ¼ã«ãªã‚Šã¾ã™ã€‚

---

## 10. ä»Šå¾Œã®æ‹¡å¼µãƒã‚¤ãƒ³ãƒˆ

1. **UIçµ±ä¸€**: Remotion/Comic ã®è¨­å®šç”»é¢ã‚’1æšã®ã‚·ãƒ¼ãƒˆã«çµ±åˆ
2. **ãƒãƒ£ãƒƒãƒˆå¼·åŒ–**: ã€Œå­—å¹•ã€ã€Œãƒ†ãƒ­ãƒƒãƒ—ã€ã€Œå¹ãå‡ºã—ã€ã®è‡ªç„¶è¨€èªç†è§£ã‚’æ”¹å–„
3. **ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**: Remotionã¯å³ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€Comicã¯ã€Œæ¬¡å›å…¬é–‹ã§åæ˜ ã€ã‚’ç›´æ„ŸåŒ–
4. **Sceneå˜ä½Typography**: å°†æ¥çš„ã«ã‚·ãƒ¼ãƒ³å˜ä½ã§ã®æ–‡å­—çµ„ã¿è¨­å®š

---

*ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ 2026-02-02 æ™‚ç‚¹ã®ãƒ†ãƒ­ãƒƒãƒ—æ”¹å–„ã‚·ãƒªãƒ¼ã‚ºå®Œäº†ç‰ˆã§ã™ã€‚*
